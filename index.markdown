# ソーシャルコーディングで geojson-vt を起こす

左右キー又はクリックで動かすことができるスライドショーです。フルスクリーン表示して頂いた方が見やすいかもしれません。
---

FOSS4G Advent Calendar 2014 の 2014-12-15 の記事です。

---

![](スクリーンショット 2014-12-15 4.03.22.png)

---

![](スクリーンショット 2014-12-15 4.03.33.png)

---

geojson-vt の情報を頂いたことをきっかけに、話題を変え、よりコードっぽいものをエントリーしたいと思いました。

---

そして、コード書きにソーシャルコーディングのツールを使うと考えた時に、どういう風なプロセスになるのかお伝えしてみたいと思いました。

自己流なので、ご紹介する方法が唯一の正解、というわけではありません。

まずは github pages を作るところから。それから、プレゼンテーションづくりには tmcw/biggie を使うことにしました。

---

まずは foss4g-advent-calendar-2014 という名前で github のレポジトリを作りました。

github に handygeospatial/foss4g-advent-calendar-2014 というレポジトリを作ったことになります。

この作業をするには、github.com のアカウントが必要です。

---

![](スクリーンショット 2014-12-15 4.04.55.png)

---

gh-pages というブランチを作りました。github.io にホストしてもらうためです。

---

![](スクリーンショット 2014-12-15 4.05.21.png)

---

github.com の右カラムの「Settings」から遷移した設定ページで、Default branch を変更できます。これを gh-pages に変えておきます。

---

![](スクリーンショット 2014-12-15 4.05.39.png)

---

これで、レポジトリができました。

私の手元の環境では、GitHub アプリを導入しているので、
github.com 右カラムの「Clone in Desktop」をクリックしてレポジトリを持ってきます。

---

![](スクリーンショット 2014-12-15 4.06.14.png)

---

![](スクリーンショット 2014-12-15 4.06.26.png)

---

GitHub アプリでは、次のような画面でレポジトリをコントロールします。

---

![](スクリーンショット 2014-12-15 4.06.38.png)

---

ターミナルでもレポジトリに移動します。

ここでエントリを作成し、レポジトリに戻せば handygeospatial.github.io/foss4g-advent-calendar-2014 にエントリがホストされる、という目論見です。

---

![](スクリーンショット 2014-12-15 4.07.19.png)

---

プレゼン作成には、tmcw/biggie を使うことにしました。tmcw/big の関連ツールで、markdown でプレゼンを書き出すと、html ベースのプレゼンファイルを出力してくれるというツールです。

---

![](スクリーンショット 2014-12-15 4.08.00.png)

---

biggie には cli (コマンドラインインタフェース) が用意されていて、npm でインストールするということが、tmcw/biggie のページにかかれています。

npm がない場合には、node.js を導入する必要があります。

---

![](スクリーンショット 2014-12-15 4.08.12.png)

---

npm install -g biggie で biggie をインストールします。

---

![](スクリーンショット 2014-12-15 4.08.24.png)

---

cli の動作チェックをしてみます。

---

![](スクリーンショット 2014-12-15 4.09.31.png)

---

生成された index.html を開いてみると、確かに tmcw/big 流のプレゼンができていることが確認できます。

---

![](スクリーンショット 2014-12-15 4.09.37.png)

---

GitHub アプリにも index.html の生成が反映されています。動作チェックを兼ねてコミットしてみましょう。

Summary 欄に update とでも記入して Commit ボタンを押します。

---

![](スクリーンショット 2014-12-15 4.10.14.png)

---

Unsynced Commit が出てきました。右上の Sync ボタンを押して github.com のレポジトリに同期します。

---

![](スクリーンショット 2014-12-15 4.10.39.png)

---

Unsynced Commit が消えて No unsynced commit と表示されたら、同期が終了しています。

---

![](スクリーンショット 2014-12-15 4.10.53.png)

---

しばらく待つ必要がある場合がありますが、http://handygeospatial.github.com/foss4g-advent-calendar-2014/ にアクセスすると、先ほど biggie で作成したプレゼンがホストされていることが分かります。

---

![](スクリーンショット 2014-12-15 4.12.33.png)

---

これで OK です。

本格的にプレゼンを作成していきましょう。index.markedown で書き進んで biggie で index.html に変換する、というフローでいきます。

---

![](スクリーンショット 2014-12-15 4.13.40.png)

---

index.markdown をテキストエディタで書き進めていきます。


---

![](スクリーンショット 2014-12-15 4.15.31.png)

---

biggie による処理を Rakefile に記述しておきます。

---

![](スクリーンショット 2014-12-15 4.16.14.png)

---

![](スクリーンショット 2014-12-15 4.16.39.png)

---

これで、rake 一発でプレゼンをチェックできるようになりました。

---

![](スクリーンショット 2014-12-15 4.16.54.png)

---

![](スクリーンショット 2014-12-15 4.17.04.png)

---

これまで撮りためたスクリーンショットを使って、このプレゼンを作成していきます。

---

![](スクリーンショット 2014-12-15 4.17.55.png)

---

![](スクリーンショット 2014-12-15 4.27.13.png)

---

ここからが本題、geojson-vt の話です。

---

github.com/mapbox/geojson-vt

GeoJSON を JavaScript 処理系でタイル化するプログラムです。

ブラウザの JavaScript 処理系でも、node.js でも動作するプログラムのようです。

---

geojson-vt の動作を理解するために、国土数値情報（用途地域）神奈川県をブラウザで
表示するテストサイトを作成しました。

---

このエントリの前半で説明したのと全く同じプロセスで、handygeospatial/geojsonvt-ksj-site というレポジトリを作っています。

---

http://handygeospatial.github.io/geojsonvt-ksj-site/

国土数値情報（用途地域）神奈川県の geojson ファイルが 12MB 程度ありますので、起動は遅いです。しかし、起動後の動作は速いです。

---

![](スクリーンショット 2014-12-15 5.33.08.png)

---

小さなズームレベルでは単純化して表示するようになっていてこの速度、というのが凄いと思います。

お試しください。

---

終了

